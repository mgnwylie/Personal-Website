labels, "</div>")
return(addLegend(map, colors = colorAdditions,
labels = labelAdditions, opacity = opacity))
}
leaflet(tf) %>%
addProviderTiles(provider = providers$CartoDB.Positron) %>%
#addCircleMarkers defines size in terms of metres - they're too similar in size
addCircleMarkers(#radius = 50*(qlogis(point.locations.sf.transform$gini01)),
color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini01_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini01, digits = 2) , sep = ", " ),
group = "Gini Coefficient 2001") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini06_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini06, digits = 2) , sep = ", "),
group = "Gini Coefficient 2006") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini11_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini11, digits = 2) , sep = ", " ) ,
group = "Gini Coefficient 2011") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini16_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini16, digits = 2), sep = ", " ),
group = "Gini Coefficient 2016") %>%
#addLayersControl command breaks each year into one selection option.
addLayersControl(
overlayGroups = c("Gini Coefficient 2001", "Gini Coefficient 2006" ,
"Gini Coefficient 2011" , "Gini Coefficient 2016")) %>%
#add legends that appear/disappear with toggle
addLegendCustom(colors = ("#3182bd"),
labels = c("< 25th percentile Gini Coefficient",
"50th percentile Gini Coefficient",
"75th percentile Gini Coefficient",
"> 75th percentile Gini Coefficient"),
title = "Gini Coefficient",
sizes = c(5, 10, 15, 20)) %>%
#hide layers 2001, 2006, and 2011 for when the map opens.
hideGroup("Gini Coefficient 2001") %>%
hideGroup("Gini Coefficient 2006") %>%
hideGroup("Gini Coefficient 2011")
leaflet(tf) %>%
addProviderTiles(provider = providers$CartoDB.Positron) %>%
#addCircleMarkers defines size in terms of metres - they're too similar in size
addCircleMarkers(#radius = 50*(qlogis(point.locations.sf.transform$gini01)),
color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini01_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini01, digits = 2) , sep = ", " ),
group = "Gini Coefficient 2001") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini06_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini06, digits = 2) , sep = ", "),
group = "Gini Coefficient 2006") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini11_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini11, digits = 2) , sep = ", " ) ,
group = "Gini Coefficient 2011") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini16_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini16, digits = 2), sep = ", " ),
group = "Gini Coefficient 2016") %>%
#addLayersControl command breaks each year into one selection option.
addLayersControl(
overlayGroups = c("Gini Coefficient 2001", "Gini Coefficient 2006" ,
"Gini Coefficient 2011" , "Gini Coefficient 2016")) %>%
#add legends that appear/disappear with toggle
addLegendCustom(colors = ("#3182bd"),
labels = c("< 25th percentile Gini Coefficient",
"50th percentile Gini Coefficient",
"75th percentile Gini Coefficient",
"> 75th percentile Gini Coefficient"),
title = ("Gini Coefficient"),
sizes = c(5, 10, 15, 20)) %>%
#hide layers 2001, 2006, and 2011 for when the map opens.
hideGroup("Gini Coefficient 2001") %>%
hideGroup("Gini Coefficient 2006") %>%
hideGroup("Gini Coefficient 2011")
#set up legend - css styles
# source: https://stackoverflow.com/questions/58505589/circles-in-legend-for-leaflet-map-with-addcirclemarkers-in-r-without-shiny
addLegendCustom <- function(map, colors, title, labels, sizes, opacity = 0.6){
colorAdditions <- paste0(colors, "; border-radius: 50%; width:",
sizes, "px; height:", sizes, "px")
labelAdditions <- paste0("<div style='display: inline-block;height: ",
sizes, "px;margin-top: 4px;line-height: ", sizes, "px;'>",
labels, "</div>")
return(addLegend(map, colors = colorAdditions, title = "Gini Coefficient"
labels = labelAdditions, opacity = opacity))
#set up legend - css styles
# source: https://stackoverflow.com/questions/58505589/circles-in-legend-for-leaflet-map-with-addcirclemarkers-in-r-without-shiny
addLegendCustom <- function(map, colors, title, labels, sizes, opacity = 0.6){
colorAdditions <- paste0(colors, "; border-radius: 50%; width:",
sizes, "px; height:", sizes, "px")
labelAdditions <- paste0("<div style='display: inline-block;height: ",
sizes, "px;margin-top: 4px;line-height: ", sizes, "px;'>",
labels, "</div>")
return(addLegend(map, colors = colorAdditions, title,
labels = labelAdditions, opacity = opacity))
}
leaflet(tf) %>%
addProviderTiles(provider = providers$CartoDB.Positron) %>%
#addCircleMarkers defines size in terms of metres - they're too similar in size
addCircleMarkers(#radius = 50*(qlogis(point.locations.sf.transform$gini01)),
color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini01_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini01, digits = 2) , sep = ", " ),
group = "Gini Coefficient 2001") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini06_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini06, digits = 2) , sep = ", "),
group = "Gini Coefficient 2006") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini11_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini11, digits = 2) , sep = ", " ) ,
group = "Gini Coefficient 2011") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini16_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini16, digits = 2), sep = ", " ),
group = "Gini Coefficient 2016") %>%
#addLayersControl command breaks each year into one selection option.
addLayersControl(
overlayGroups = c("Gini Coefficient 2001", "Gini Coefficient 2006" ,
"Gini Coefficient 2011" , "Gini Coefficient 2016")) %>%
#add legends that appear/disappear with toggle
addLegendCustom(colors = ("#3182bd"),
labels = c("< 25th percentile Gini Coefficient",
"50th percentile Gini Coefficient",
"75th percentile Gini Coefficient",
"> 75th percentile Gini Coefficient"),
sizes = c(5, 10, 15, 20)) %>%
#hide layers 2001, 2006, and 2011 for when the map opens.
hideGroup("Gini Coefficient 2001") %>%
hideGroup("Gini Coefficient 2006") %>%
hideGroup("Gini Coefficient 2011")
leaflet(tf) %>%
addProviderTiles(provider = providers$CartoDB.Positron) %>%
#addCircleMarkers defines size in terms of metres - they're too similar in size
addCircleMarkers(#radius = 50*(qlogis(point.locations.sf.transform$gini01)),
color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini01_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini01, digits = 2) , sep = ", " ),
group = "Gini Coefficient 2001") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini06_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini06, digits = 2) , sep = ", "),
group = "Gini Coefficient 2006") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini11_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini11, digits = 2) , sep = ", " ) ,
group = "Gini Coefficient 2011") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini16_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini16, digits = 2), sep = ", " ),
group = "Gini Coefficient 2016") %>%
#addLayersControl command breaks each year into one selection option.
addLayersControl(
overlayGroups = c("Gini Coefficient 2001", "Gini Coefficient 2006" ,
"Gini Coefficient 2011" , "Gini Coefficient 2016")) %>%
#add legends that appear/disappear with toggle
addLegendCustom(colors = ("#3182bd"),
labels = c("< 25th percentile Gini Coefficient",
"50th percentile Gini Coefficient",
"75th percentile Gini Coefficient",
"> 75th percentile Gini Coefficient"),
title = "Gini"
sizes = c(5, 10, 15, 20)) %>%
leaflet(tf) %>%
addProviderTiles(provider = providers$CartoDB.Positron) %>%
#addCircleMarkers defines size in terms of metres - they're too similar in size
addCircleMarkers(#radius = 50*(qlogis(point.locations.sf.transform$gini01)),
color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini01_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini01, digits = 2) , sep = ", " ),
group = "Gini Coefficient 2001") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini06_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini06, digits = 2) , sep = ", "),
group = "Gini Coefficient 2006") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini11_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini11, digits = 2) , sep = ", " ) ,
group = "Gini Coefficient 2011") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini16_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini16, digits = 2), sep = ", " ),
group = "Gini Coefficient 2016") %>%
#addLayersControl command breaks each year into one selection option.
addLayersControl(
overlayGroups = c("Gini Coefficient 2001", "Gini Coefficient 2006" ,
"Gini Coefficient 2011" , "Gini Coefficient 2016")) %>%
#add legends that appear/disappear with toggle
addLegendCustom(colors = ("#3182bd"),
labels = c("< 25th percentile Gini Coefficient",
"50th percentile Gini Coefficient",
"75th percentile Gini Coefficient",
"> 75th percentile Gini Coefficient"),
title = "Gini",
sizes = c(5, 10, 15, 20)) %>%
#hide layers 2001, 2006, and 2011 for when the map opens.
hideGroup("Gini Coefficient 2001") %>%
hideGroup("Gini Coefficient 2006") %>%
hideGroup("Gini Coefficient 2011")
leaflet(tf) %>%
addProviderTiles(provider = providers$CartoDB.Positron) %>%
#addCircleMarkers defines size in terms of metres - they're too similar in size
addCircleMarkers(#radius = 50*(qlogis(point.locations.sf.transform$gini01)),
color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini01_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini01, digits = 2) , sep = ", " ),
group = "Gini Coefficient 2001") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini06_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini06, digits = 2) , sep = ", "),
group = "Gini Coefficient 2006") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini11_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini11, digits = 2) , sep = ", " ) ,
group = "Gini Coefficient 2011") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini16_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini16, digits = 2), sep = ", " ),
group = "Gini Coefficient 2016") %>%
#addLayersControl command breaks each year into one selection option.
addLayersControl(
overlayGroups = c("Gini Coefficient 2001", "Gini Coefficient 2006" ,
"Gini Coefficient 2011" , "Gini Coefficient 2016")) %>%
#add legends that appear/disappear with toggle
addLegendCustom(colors = ("#3182bd"),
position = "topright",
labels = c("< 25th percentile Gini Coefficient",
"50th percentile Gini Coefficient",
"75th percentile Gini Coefficient",
"> 75th percentile Gini Coefficient"),
title = "Gini",
sizes = c(5, 10, 15, 20)) %>%
#hide layers 2001, 2006, and 2011 for when the map opens.
hideGroup("Gini Coefficient 2001") %>%
hideGroup("Gini Coefficient 2006") %>%
hideGroup("Gini Coefficient 2011")
leaflet(tf) %>%
addProviderTiles(provider = providers$CartoDB.Positron) %>%
#addCircleMarkers defines size in terms of metres - they're too similar in size
addCircleMarkers(#radius = 50*(qlogis(point.locations.sf.transform$gini01)),
color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini01_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini01, digits = 2) , sep = ", " ),
group = "Gini Coefficient 2001") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini06_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini06, digits = 2) , sep = ", "),
group = "Gini Coefficient 2006") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini11_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini11, digits = 2) , sep = ", " ) ,
group = "Gini Coefficient 2011") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini16_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini16, digits = 2), sep = ", " ),
group = "Gini Coefficient 2016") %>%
#addLayersControl command breaks each year into one selection option.
addLayersControl(
overlayGroups = c("Gini Coefficient 2001", "Gini Coefficient 2006" ,
"Gini Coefficient 2011" , "Gini Coefficient 2016")) %>%
#add legends that appear/disappear with toggle
addLegendCustom(colors = ("#3182bd"),
labels = c("< 25th percentile Gini Coefficient",
"50th percentile Gini Coefficient",
"75th percentile Gini Coefficient",
"> 75th percentile Gini Coefficient"),
title = "Gini",
sizes = c(5, 10, 15, 20)) %>%
#hide layers 2001, 2006, and 2011 for when the map opens.
hideGroup("Gini Coefficient 2001") %>%
hideGroup("Gini Coefficient 2006") %>%
hideGroup("Gini Coefficient 2011")
#set up legend - css styles
# source: https://stackoverflow.com/questions/58505589/circles-in-legend-for-leaflet-map-with-addcirclemarkers-in-r-without-shiny
addLegendCustom <- function(map, colors, title, labels, sizes, opacity = 0.6){
colorAdditions <- paste0(colors, "; border-radius: 50%; width:",
sizes, "px; height:", sizes, "px")
labelAdditions <- paste0("<div style='display: inline-block;height: ",
sizes, "px;margin-top: 4px;line-height: ", sizes, "px;'>",
labels, "</div>")
return(addLegend(map, colors = colorAdditions,
labels = labelAdditions, opacity = opacity, title))
}
leaflet(tf) %>%
addProviderTiles(provider = providers$CartoDB.Positron) %>%
#addCircleMarkers defines size in terms of metres - they're too similar in size
addCircleMarkers(#radius = 50*(qlogis(point.locations.sf.transform$gini01)),
color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini01_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini01, digits = 2) , sep = ", " ),
group = "Gini Coefficient 2001") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini06_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini06, digits = 2) , sep = ", "),
group = "Gini Coefficient 2006") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini11_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini11, digits = 2) , sep = ", " ) ,
group = "Gini Coefficient 2011") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini16_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini16, digits = 2), sep = ", " ),
group = "Gini Coefficient 2016") %>%
#addLayersControl command breaks each year into one selection option.
addLayersControl(
overlayGroups = c("Gini Coefficient 2001", "Gini Coefficient 2006" ,
"Gini Coefficient 2011" , "Gini Coefficient 2016")) %>%
#add legends that appear/disappear with toggle
addLegendCustom(colors = ("#3182bd"),
labels = c("< 25th percentile Gini Coefficient",
"50th percentile Gini Coefficient",
"75th percentile Gini Coefficient",
"> 75th percentile Gini Coefficient"),
sizes = c(5, 10, 15, 20),
title = "") %>%
#hide layers 2001, 2006, and 2011 for when the map opens.
hideGroup("Gini Coefficient 2001") %>%
hideGroup("Gini Coefficient 2006") %>%
hideGroup("Gini Coefficient 2011")
leaflet(tf) %>%
addProviderTiles(provider = providers$CartoDB.Positron) %>%
#addCircleMarkers defines size in terms of metres - they're too similar in size
addCircleMarkers(#radius = 50*(qlogis(point.locations.sf.transform$gini01)),
color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini01_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini01, digits = 2) , sep = ", " ),
group = "Gini Coefficient 2001") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini06_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini06, digits = 2) , sep = ", "),
group = "Gini Coefficient 2006") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini11_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini11, digits = 2) , sep = ", " ) ,
group = "Gini Coefficient 2011") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini16_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini16, digits = 2), sep = ", " ),
group = "Gini Coefficient 2016") %>%
#addLayersControl command breaks each year into one selection option.
addLayersControl(
overlayGroups = c("Gini Coefficient 2001", "Gini Coefficient 2006" ,
"Gini Coefficient 2011" , "Gini Coefficient 2016")) %>%
#add legends that appear/disappear with toggle
addLegendCustom(colors = ("#3182bd"),
labels = c("< 25th percentile Gini Coefficient",
"50th percentile Gini Coefficient",
"75th percentile Gini Coefficient",
"> 75th percentile Gini Coefficient"),
sizes = c(5, 10, 15, 20),
title = "topright") %>%
#hide layers 2001, 2006, and 2011 for when the map opens.
hideGroup("Gini Coefficient 2001") %>%
hideGroup("Gini Coefficient 2006") %>%
hideGroup("Gini Coefficient 2011")
leaflet(tf) %>%
addProviderTiles(provider = providers$CartoDB.Positron) %>%
#addCircleMarkers defines size in terms of metres - they're too similar in size
addCircleMarkers(#radius = 50*(qlogis(point.locations.sf.transform$gini01)),
color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini01_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini01, digits = 2) , sep = ", " ),
group = "Gini Coefficient 2001") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini06_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini06, digits = 2) , sep = ", "),
group = "Gini Coefficient 2006") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini11_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini11, digits = 2) , sep = ", " ) ,
group = "Gini Coefficient 2011") %>%
addCircleMarkers( color = "#3182bd" ,
fillColor = "#9ecae1" ,
fillOpacity = .6 ,
radius = ~ gini16_bin*2 ,
weight = 2 ,
label = ~paste(CMANAME , round(gini16, digits = 2), sep = ", " ),
group = "Gini Coefficient 2016") %>%
#addLayersControl command breaks each year into one selection option.
addLayersControl(
overlayGroups = c("Gini Coefficient 2001", "Gini Coefficient 2006" ,
"Gini Coefficient 2011" , "Gini Coefficient 2016")) %>%
#add legends that appear/disappear with toggle
addLegendCustom(colors = ("#3182bd"),
labels = c("< 25th percentile Gini Coefficient",
"50th percentile Gini Coefficient",
"75th percentile Gini Coefficient",
"> 75th percentile Gini Coefficient"),
sizes = c(5, 10, 15, 20),
title = "topleft") %>%
#hide layers 2001, 2006, and 2011 for when the map opens.
hideGroup("Gini Coefficient 2001") %>%
hideGroup("Gini Coefficient 2006") %>%
hideGroup("Gini Coefficient 2011")
